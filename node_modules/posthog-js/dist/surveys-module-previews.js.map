{"version":3,"file":"surveys-module-previews.js","sources":["../src/posthog-surveys-types.ts","../src/utils/globals.ts","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/dist/preact.module.js","../src/extensions/surveys/surveys-utils.tsx","../node_modules/.pnpm/preact@10.19.3/node_modules/preact/hooks/dist/hooks.module.js","../src/utils/type-utils.ts","../src/extensions/surveys/icons.tsx","../src/extensions/surveys/components/PostHogLogo.tsx","../src/extensions/surveys/components/BottomSection.tsx","../src/extensions/surveys/components/QuestionHeader.tsx","../src/extensions/surveys/components/ConfirmationMessage.tsx","../src/extensions/surveys/hooks/useContrastingTextColor.ts","../src/extensions/surveys/components/QuestionTypes.tsx","../src/extensions/surveys.tsx","../src/extensions/surveys-widget.ts"],"sourcesContent":["/**\n * Having Survey types in types.ts was confusing tsc\n * and generating an invalid module.d.ts\n * See https://github.com/PostHog/posthog-js/issues/698\n */\n\nexport interface SurveyAppearance {\n    // keep in sync with frontend/src/types.ts -> SurveyAppearance\n    backgroundColor?: string\n    submitButtonColor?: string\n    // text color is deprecated, use auto contrast text color instead\n    textColor?: string\n    // deprecate submit button text eventually\n    submitButtonText?: string\n    descriptionTextColor?: string\n    ratingButtonColor?: string\n    ratingButtonActiveColor?: string\n    ratingButtonHoverColor?: string\n    whiteLabel?: boolean\n    autoDisappear?: boolean\n    displayThankYouMessage?: boolean\n    thankYouMessageHeader?: string\n    thankYouMessageDescription?: string\n    borderColor?: string\n    position?: 'left' | 'right' | 'center'\n    placeholder?: string\n    // widget options\n    widgetType?: 'button' | 'tab' | 'selector'\n    widgetSelector?: string\n    widgetLabel?: string\n    widgetColor?: string\n    // questionable: Not in frontend/src/types.ts -> SurveyAppearance, but used in site app\n    maxWidth?: string\n    zIndex?: string\n    shuffleQuestions?: boolean\n}\n\nexport enum SurveyType {\n    Popover = 'popover',\n    API = 'api',\n    Widget = 'widget',\n}\n\nexport type SurveyQuestion = BasicSurveyQuestion | LinkSurveyQuestion | RatingSurveyQuestion | MultipleSurveyQuestion\n\ninterface SurveyQuestionBase {\n    question: string\n    description?: string | null\n    optional?: boolean\n    buttonText?: string\n}\n\nexport interface BasicSurveyQuestion extends SurveyQuestionBase {\n    type: SurveyQuestionType.Open\n}\n\nexport interface LinkSurveyQuestion extends SurveyQuestionBase {\n    type: SurveyQuestionType.Link\n    link?: string | null\n}\n\nexport interface RatingSurveyQuestion extends SurveyQuestionBase {\n    type: SurveyQuestionType.Rating\n    display: 'number' | 'emoji'\n    scale: number\n    lowerBoundLabel: string\n    upperBoundLabel: string\n}\n\nexport interface MultipleSurveyQuestion extends SurveyQuestionBase {\n    type: SurveyQuestionType.SingleChoice | SurveyQuestionType.MultipleChoice\n    choices: string[]\n    hasOpenChoice?: boolean\n    shuffleOptions?: boolean\n}\n\nexport enum SurveyQuestionType {\n    Open = 'open',\n    MultipleChoice = 'multiple_choice',\n    SingleChoice = 'single_choice',\n    Rating = 'rating',\n    Link = 'link',\n}\n\nexport interface SurveyResponse {\n    surveys: Survey[]\n}\n\nexport type SurveyCallback = (surveys: Survey[]) => void\n\nexport type SurveyUrlMatchType = 'regex' | 'exact' | 'icontains'\n\nexport interface Survey {\n    // Sync this with the backend's SurveyAPISerializer!\n    id: string\n    name: string\n    description: string\n    type: SurveyType\n    linked_flag_key: string | null\n    targeting_flag_key: string | null\n    questions: SurveyQuestion[]\n    appearance: SurveyAppearance | null\n    conditions: {\n        url?: string\n        selector?: string\n        seenSurveyWaitPeriodInDays?: number\n        urlMatchType?: SurveyUrlMatchType\n    } | null\n    start_date: string | null\n    end_date: string | null\n}\n","/*\n * Global helpers to protect access to browser globals in a way that is safer for different targets\n * like DOM, SSR, Web workers etc.\n *\n * NOTE: Typically we want the \"window\" but globalThis works for both the typical browser context as\n * well as other contexts such as the web worker context. Window is still exported for any bits that explicitly require it.\n * If in doubt - export the global you need from this file and use that as an optional value. This way the code path is forced\n * to handle the case where the global is not available.\n */\n\n// eslint-disable-next-line no-restricted-globals\nconst win: (Window & typeof globalThis) | undefined = typeof window !== 'undefined' ? window : undefined\n\nconst global: typeof globalThis | undefined = typeof globalThis !== 'undefined' ? globalThis : win\n\nexport const ArrayProto = Array.prototype\nexport const nativeForEach = ArrayProto.forEach\nexport const nativeIndexOf = ArrayProto.indexOf\n\nexport const navigator = global?.navigator\nexport const document = global?.document\nexport const location = global?.location\nexport const fetch = global?.fetch\nexport const XMLHttpRequest =\n    global?.XMLHttpRequest && 'withCredentials' in new global.XMLHttpRequest() ? global.XMLHttpRequest : undefined\nexport const AbortController = global?.AbortController\nexport const userAgent = navigator?.userAgent\nexport const assignableWindow: Window & typeof globalThis & Record<string, any> = win ?? ({} as any)\n\nexport { win as window }\n","var n,l,u,t,i,o,r,f,e,c={},s=[],a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function v(n,l){for(var u in l)n[u]=l[u];return n}function p(n){var l=n.parentNode;l&&l.removeChild(n)}function y(l,u,t){var i,o,r,f={};for(r in u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return d(l,f,i,o,null)}function d(n,t,i,o,r){var f={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=l.vnode&&l.vnode(f),f}function _(){return{current:null}}function g(n){return n.children}function b(n,l){this.props=n,this.context=l}function m(n,l){if(null==l)return n.__?m(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?m(n):null}function k(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return k(n)}}function w(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!x.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(x)}function x(){var n,u,t,o,r,e,c,s,a;for(i.sort(f);n=i.shift();)n.__d&&(u=i.length,o=void 0,e=(r=(t=n).__v).__e,s=[],a=[],(c=t.__P)&&((o=v({},r)).__v=r.__v+1,l.vnode&&l.vnode(o),L(c,o,r,t.__n,void 0!==c.ownerSVGElement,32&r.__u?[e]:null,s,null==e?m(r):e,!!(32&r.__u),a),o.__.__k[o.__i]=o,M(s,o,a),o.__e!=e&&k(o)),i.length>u&&i.sort(f));x.__r=0}function C(n,l,u,t,i,o,r,f,e,a,h){var v,p,y,d,_,g=t&&t.__k||s,b=l.length;for(u.__d=e,P(u,l,g),e=u.__d,v=0;v<b;v++)null!=(y=u.__k[v])&&\"boolean\"!=typeof y&&\"function\"!=typeof y&&(p=-1===y.__i?c:g[y.__i]||c,y.__i=v,L(n,y,p,i,o,r,f,e,a,h),d=y.__e,y.ref&&p.ref!=y.ref&&(p.ref&&z(p.ref,null,y),h.push(y.ref,y.__c||d,y)),null==_&&null!=d&&(_=d),65536&y.__u||p.__k===y.__k?e=S(y,e,n):\"function\"==typeof y.type&&void 0!==y.__d?e=y.__d:d&&(e=d.nextSibling),y.__d=void 0,y.__u&=-196609);u.__d=e,u.__e=_}function P(n,l,u){var t,i,o,r,f,e=l.length,c=u.length,s=c,a=0;for(n.__k=[],t=0;t<e;t++)null!=(i=n.__k[t]=null==(i=l[t])||\"boolean\"==typeof i||\"function\"==typeof i?null:\"string\"==typeof i||\"number\"==typeof i||\"bigint\"==typeof i||i.constructor==String?d(null,i,null,null,i):h(i)?d(g,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?d(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=n,i.__b=n.__b+1,f=H(i,u,r=t+a,s),i.__i=f,o=null,-1!==f&&(s--,(o=u[f])&&(o.__u|=131072)),null==o||null===o.__v?(-1==f&&a--,\"function\"!=typeof i.type&&(i.__u|=65536)):f!==r&&(f===r+1?a++:f>r?s>e-r?a+=f-r:a--:a=f<r&&f==r-1?f-r:0,f!==t+a&&(i.__u|=65536))):(o=u[t])&&null==o.key&&o.__e&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o,!1),u[t]=null,s--);if(s)for(t=0;t<c;t++)null!=(o=u[t])&&0==(131072&o.__u)&&(o.__e==n.__d&&(n.__d=m(o)),N(o,o))}function S(n,l,u){var t,i;if(\"function\"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=S(t[i],l,u));return l}return n.__e!=l&&(u.insertBefore(n.__e,l||null),l=n.__e),l&&l.nextSibling}function $(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(h(n)?n.some(function(n){$(n,l)}):l.push(n)),l}function H(n,l,u,t){var i=n.key,o=n.type,r=u-1,f=u+1,e=l[u];if(null===e||e&&i==e.key&&o===e.type)return u;if(t>(null!=e&&0==(131072&e.__u)?1:0))for(;r>=0||f<l.length;){if(r>=0){if((e=l[r])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return r;r--}if(f<l.length){if((e=l[f])&&0==(131072&e.__u)&&i==e.key&&o===e.type)return f;f++}}return-1}function I(n,l,u){\"-\"===l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||a.test(l)?u:u+\"px\"}function T(n,l,u,t,i){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||I(n.style,l,\"\");if(u)for(l in u)t&&u[l]===t[l]||I(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/(PointerCapture)$|Capture$/,\"$1\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=Date.now(),n.addEventListener(l,o?D:A,o)):n.removeEventListener(l,o?D:A,o);else{if(i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!==l&&\"height\"!==l&&\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&\"rowSpan\"!==l&&\"colSpan\"!==l&&\"role\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!==l[4]?n.removeAttribute(l):n.setAttribute(l,u))}}function A(n){var u=this.l[n.type+!1];if(n.t){if(n.t<=u.u)return}else n.t=Date.now();return u(l.event?l.event(n):n)}function D(n){return this.l[n.type+!0](l.event?l.event(n):n)}function L(n,u,t,i,o,r,f,e,c,s){var a,p,y,d,_,m,k,w,x,P,S,$,H,I,T,A=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[e=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof A)try{if(w=u.props,x=(a=A.contextType)&&i[a.__c],P=a?x?x.props.value:a.__:i,t.__c?k=(p=u.__c=t.__c).__=p.__E:(\"prototype\"in A&&A.prototype.render?u.__c=p=new A(w,P):(u.__c=p=new b(w,P),p.constructor=A,p.render=O),x&&x.sub(p),p.props=w,p.state||(p.state={}),p.context=P,p.__n=i,y=p.__d=!0,p.__h=[],p._sb=[]),null==p.__s&&(p.__s=p.state),null!=A.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=v({},p.__s)),v(p.__s,A.getDerivedStateFromProps(w,p.__s))),d=p.props,_=p.state,p.__v=u,y)null==A.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==A.getDerivedStateFromProps&&w!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,P),!p.__e&&(null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,P)||u.__v===t.__v)){for(u.__v!==t.__v&&(p.props=w,p.state=p.__s,p.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.forEach(function(n){n&&(n.__=u)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&f.push(p);break n}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,P),null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(d,_,m)})}if(p.context=P,p.props=w,p.__P=n,p.__e=!1,$=l.__r,H=0,\"prototype\"in A&&A.prototype.render){for(p.state=p.__s,p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),I=0;I<p._sb.length;I++)p.__h.push(p._sb[I]);p._sb=[]}else do{p.__d=!1,$&&$(u),a=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++H<25);p.state=p.__s,null!=p.getChildContext&&(i=v(v({},i),p.getChildContext())),y||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(d,_)),C(n,h(T=null!=a&&a.type===g&&null==a.key?a.props.children:a)?T:[T],u,t,i,o,r,f,e,c,s),p.base=u.__e,u.__u&=-161,p.__h.length&&f.push(p),k&&(p.__E=p.__=null)}catch(n){u.__v=null,c||null!=r?(u.__e=e,u.__u|=c?160:32,r[r.indexOf(e)]=null):(u.__e=t.__e,u.__k=t.__k),l.__e(n,u,t)}else null==r&&u.__v===t.__v?(u.__k=t.__k,u.__e=t.__e):u.__e=j(t.__e,u,t,i,o,r,f,c,s);(a=l.diffed)&&a(u)}function M(n,u,t){u.__d=void 0;for(var i=0;i<t.length;i++)z(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function j(l,u,t,i,o,r,f,e,s){var a,v,y,d,_,g,b,k=t.props,w=u.props,x=u.type;if(\"svg\"===x&&(o=!0),null!=r)for(a=0;a<r.length;a++)if((_=r[a])&&\"setAttribute\"in _==!!x&&(x?_.localName===x:3===_.nodeType)){l=_,r[a]=null;break}if(null==l){if(null===x)return document.createTextNode(w);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",x):document.createElement(x,w.is&&w),r=null,e=!1}if(null===x)k===w||e&&l.data===w||(l.data=w);else{if(r=r&&n.call(l.childNodes),k=t.props||c,!e&&null!=r)for(k={},a=0;a<l.attributes.length;a++)k[(_=l.attributes[a]).name]=_.value;for(a in k)_=k[a],\"children\"==a||(\"dangerouslySetInnerHTML\"==a?y=_:\"key\"===a||a in w||T(l,a,null,_,o));for(a in w)_=w[a],\"children\"==a?d=_:\"dangerouslySetInnerHTML\"==a?v=_:\"value\"==a?g=_:\"checked\"==a?b=_:\"key\"===a||e&&\"function\"!=typeof _||k[a]===_||T(l,a,_,k[a],o);if(v)e||y&&(v.__html===y.__html||v.__html===l.innerHTML)||(l.innerHTML=v.__html),u.__k=[];else if(y&&(l.innerHTML=\"\"),C(l,h(d)?d:[d],u,t,i,o&&\"foreignObject\"!==x,r,f,r?r[0]:t.__k&&m(t,0),e,s),null!=r)for(a=r.length;a--;)null!=r[a]&&p(r[a]);e||(a=\"value\",void 0!==g&&(g!==l[a]||\"progress\"===x&&!g||\"option\"===x&&g!==k[a])&&T(l,a,g,k[a],!1),a=\"checked\",void 0!==b&&b!==l[a]&&T(l,a,b,k[a],!1))}return l}function z(n,u,t){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,t)}}function N(n,u,t){var i,o;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||z(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&N(i[o],u,t||\"function\"!=typeof n.type);t||null==n.__e||p(n.__e),n.__=n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function q(u,t,i){var o,r,f,e;l.__&&l.__(u,t),r=(o=\"function\"==typeof i)?null:i&&i.__k||t.__k,f=[],e=[],L(t,u=(!o&&i||t).__k=y(g,null,[u]),r||c,c,void 0!==t.ownerSVGElement,!o&&i?[i]:r?null:t.firstChild?n.call(t.childNodes):null,f,!o&&i?i:r?r.__e:t.firstChild,o,e),M(f,u,e)}function B(n,l){q(n,l,B)}function E(l,u,t){var i,o,r,f,e=v({},l.props);for(r in l.type&&l.type.defaultProps&&(f=l.type.defaultProps),u)\"key\"==r?i=u[r]:\"ref\"==r?o=u[r]:e[r]=void 0===u[r]&&void 0!==f?f[r]:u[r];return arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),d(l.type,e,i||l.key,o||l.ref,null)}function F(n,l){var u={__c:l=\"__cC\"+e++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,t;return this.getChildContext||(u=[],(t={})[l]=this,this.getChildContext=function(){return t},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(function(n){n.__e=!0,w(n)})},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=s.slice,l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},b.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),\"function\"==typeof n&&(n=n(v({},u),this.props)),n&&v(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),w(this))},b.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),w(this))},b.prototype.render=g,i=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(n,l){return n.__v.__b-l.__v.__b},x.__r=0,e=0;export{b as Component,g as Fragment,E as cloneElement,F as createContext,y as createElement,_ as createRef,y as h,B as hydrate,t as isValidElement,l as options,q as render,$ as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","import { PostHog } from '../../posthog-core'\nimport { Survey, SurveyAppearance, MultipleSurveyQuestion, SurveyQuestion } from '../../posthog-surveys-types'\nimport { window as _window, document as _document } from '../../utils/globals'\nimport { createContext } from 'preact'\n// We cast the types here which is dangerous but protected by the top level generateSurveys call\nconst window = _window as Window & typeof globalThis\nconst document = _document as Document\n\nexport const style = (appearance: SurveyAppearance | null) => {\n    const positions = {\n        left: 'left: 30px;',\n        right: 'right: 30px;',\n        center: `\n            left: 50%;\n            transform: translateX(-50%);\n          `,\n    }\n    return `\n          .survey-form {\n              position: fixed;\n              margin: 0px;\n              bottom: 0px;\n              color: black;\n              font-weight: normal;\n              font-family: -apple-system, BlinkMacSystemFont, \"Inter\", \"Segoe UI\", \"Roboto\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n              text-align: left;\n              max-width: ${parseInt(appearance?.maxWidth || '300')}px;\n              z-index: ${parseInt(appearance?.zIndex || '99999')};\n              border: 1.5px solid ${appearance?.borderColor || '#c9c6c6'};\n              border-bottom: 0px;\n              width: 100%;\n              ${positions[appearance?.position || 'right'] || 'right: 30px;'}\n          }\n          .form-submit[disabled] {\n              opacity: 0.6;\n              filter: grayscale(50%);\n              cursor: not-allowed;\n          }\n          .survey-form {\n              flex-direction: column;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n              border-top-left-radius: 10px;\n              border-top-right-radius: 10px;\n              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);\n          }\n          .survey-form textarea {\n              color: #2d2d2d;\n              font-size: 14px;\n              font-family: -apple-system, BlinkMacSystemFont, \"Inter\", \"Segoe UI\", \"Roboto\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n              background: white;\n              color: black;\n              outline: none;\n              padding-left: 10px;\n              padding-right: 10px;\n              padding-top: 10px;\n              border-radius: 6px;\n              border-color: ${appearance?.borderColor || '#c9c6c6'};\n              margin-top: 14px;\n          }\n          .form-submit {\n              box-sizing: border-box;\n              margin: 0;\n              font-family: inherit;\n              overflow: visible;\n              text-transform: none;\n              position: relative;\n              display: inline-block;\n              font-weight: 700;\n              white-space: nowrap;\n              text-align: center;\n              border: 1.5px solid transparent;\n              cursor: pointer;\n              user-select: none;\n              touch-action: manipulation;\n              padding: 12px;\n              font-size: 14px;\n              border-radius: 6px;\n              outline: 0;\n              background: ${appearance?.submitButtonColor || 'black'} !important;\n              text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n              box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n              width: 100%;\n          }\n          .form-cancel {\n              float: right;\n              border: none;\n              background: none;\n              cursor: pointer;\n          }\n          .cancel-btn-wrapper {\n              position: absolute;\n              width: 35px;\n              height: 35px;\n              border-radius: 100%;\n              top: 0;\n              right: 0;\n              transform: translate(50%, -50%);\n              background: white;\n              border: 1.5px solid ${appearance?.borderColor || '#c9c6c6'};\n              display: flex;\n              justify-content: center;\n              align-items: center;\n          }\n          .bolded { font-weight: 600; }\n          .buttons {\n              display: flex;\n              justify-content: center;\n          }\n          .footer-branding {\n              font-size: 11px;\n              margin-top: 10px;\n              text-align: center;\n              display: flex;\n              justify-content: center;\n              gap: 4px;\n              align-items: center;\n              font-weight: 500;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n              text-decoration: none;\n          }\n          .survey-box {\n              padding: 20px 25px 10px;\n              display: flex;\n              flex-direction: column;\n              border-radius: 10px;\n          }\n          .survey-question {\n              font-weight: 500;\n              font-size: 14px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n          }\n          .question-textarea-wrapper {\n              display: flex;\n              flex-direction: column;\n          }\n          .description {\n              font-size: 13px;\n              padding-top: 5px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n          }\n          .ratings-number {\n              background-color: ${appearance?.ratingButtonColor || 'white'};\n              font-size: 16px;\n              font-weight: 600;\n              padding: 8px 0px;\n              border: none;\n          }\n          .ratings-number:hover {\n              cursor: pointer;\n          }\n          .rating-options {\n              margin-top: 14px;\n          }\n          .rating-options-number {\n              display: grid;\n              border-radius: 6px;\n              overflow: hidden;\n              border: 1.5px solid ${appearance?.borderColor || '#c9c6c6'};\n          }\n          .rating-options-number > .ratings-number {\n              border-right: 1px solid ${appearance?.borderColor || '#c9c6c6'};\n          }\n          .rating-options-number > .ratings-number:last-of-type {\n              border-right: 0px;\n          }\n          .rating-options-number .rating-active {\n              background: ${appearance?.ratingButtonActiveColor || 'black'};\n          }\n          .rating-options-emoji {\n              display: flex;\n              justify-content: space-between;\n          }\n          .ratings-emoji {\n              font-size: 16px;\n              background-color: transparent;\n              border: none;\n              padding: 0px;\n          }\n          .ratings-emoji:hover {\n              cursor: pointer;\n          }\n          .ratings-emoji.rating-active svg {\n              fill: ${appearance?.ratingButtonActiveColor || 'black'};\n          }\n          .emoji-svg {\n              fill: ${appearance?.ratingButtonColor || '#c9c6c6'};\n          }\n          .rating-text {\n              display: flex;\n              flex-direction: row;\n              font-size: 11px;\n              justify-content: space-between;\n              margin-top: 6px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n              opacity: .60;\n          }\n          .multiple-choice-options {\n              margin-top: 13px;\n              font-size: 14px;\n          }\n          .multiple-choice-options .choice-option {\n              display: flex;\n              align-items: center;\n              gap: 4px;\n              font-size: 13px;\n              cursor: pointer;\n              margin-bottom: 5px;\n              position: relative;\n          }\n          .multiple-choice-options > .choice-option:last-of-type {\n              margin-bottom: 0px;\n          }\n          .multiple-choice-options input {\n              cursor: pointer;\n              position: absolute;\n              opacity: 0;\n          }\n          .choice-check {\n              position: absolute;\n              right: 10px;\n              background: white;\n          }\n          .choice-check svg {\n              display: none;\n          }\n          .multiple-choice-options .choice-option:hover .choice-check svg {\n              display: inline-block;\n              opacity: .25;\n          }\n          .multiple-choice-options input:checked + label + .choice-check svg {\n              display: inline-block;\n              opacity: 100% !important;\n          }\n          .multiple-choice-options input:checked + label {\n              font-weight: bold;\n              border: 1.5px solid rgba(0,0,0);\n          }\n          .multiple-choice-options input:checked + label input {\n              font-weight: bold;\n          }\n          .multiple-choice-options label {\n              width: 100%;\n              cursor: pointer;\n              padding: 10px;\n              border: 1.5px solid rgba(0,0,0,.25);\n              border-radius: 4px;\n              background: white;\n          }\n          .multiple-choice-options .choice-option-open label {\n              padding-right: 30px;\n              display: flex;\n              flex-wrap: wrap;\n              gap: 8px;\n              max-width: 100%;\n          }\n          .multiple-choice-options .choice-option-open label span {\n              width: 100%;\n          }\n          .multiple-choice-options .choice-option-open input:disabled + label {\n              opacity: 0.6;\n          }\n          .multiple-choice-options .choice-option-open label input {\n              position: relative;\n              opacity: 1;\n              flex-grow: 1;\n              border: 0;\n              outline: 0;\n          }\n          .thank-you-message {\n              position: fixed;\n              bottom: 0px;\n              z-index: ${parseInt(appearance?.zIndex || '99999')};\n              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);\n              font-family: -apple-system, BlinkMacSystemFont, \"Inter\", \"Segoe UI\", \"Roboto\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n              border-top-left-radius: 10px;\n              border-top-right-radius: 10px;\n              padding: 20px 25px 10px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n              border: 1.5px solid ${appearance?.borderColor || '#c9c6c6'};\n              text-align: center;\n              max-width: ${parseInt(appearance?.maxWidth || '300')}px;\n              min-width: 150px;\n              width: 100%;\n              ${positions[appearance?.position || 'right'] || 'right: 30px;'}\n          }\n          .thank-you-message-body {\n              margin-top: 6px;\n              font-size: 14px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n          }\n          .thank-you-message-header {\n              margin: 10px 0px 0px;\n              background: ${appearance?.backgroundColor || '#eeeded'};\n          }\n          .thank-you-message-container .form-submit {\n              margin-top: 20px;\n              margin-bottom: 10px;\n          }\n          .thank-you-message-countdown {\n              margin-left: 6px;\n          }\n          .bottom-section {\n              margin-top: 14px;\n          }\n          `\n}\n\nfunction nameToHex(name: string) {\n    return {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        'indianred ': '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrodyellow: '#fafad2',\n        lightgrey: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370d8',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#d87093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32',\n    }[name.toLowerCase()]\n}\n\nfunction hex2rgb(c: string) {\n    if (c[0] === '#') {\n        const hexColor = c.replace(/^#/, '')\n        const r = parseInt(hexColor.slice(0, 2), 16)\n        const g = parseInt(hexColor.slice(2, 4), 16)\n        const b = parseInt(hexColor.slice(4, 6), 16)\n        return 'rgb(' + r + ',' + g + ',' + b + ')'\n    }\n    return 'rgb(255, 255, 255)'\n}\n\nexport function getContrastingTextColor(color: string = defaultBackgroundColor) {\n    let rgb\n    if (color[0] === '#') {\n        rgb = hex2rgb(color)\n    }\n    if (color.startsWith('rgb')) {\n        rgb = color\n    }\n    // otherwise it's a color name\n    const nameColorToHex = nameToHex(color)\n    if (nameColorToHex) {\n        rgb = hex2rgb(nameColorToHex)\n    }\n    if (!rgb) {\n        return 'black'\n    }\n    const colorMatch = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)\n    if (colorMatch) {\n        const r = parseInt(colorMatch[1])\n        const g = parseInt(colorMatch[2])\n        const b = parseInt(colorMatch[3])\n        const hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b))\n        return hsp > 127.5 ? 'black' : 'white'\n    }\n    return 'black'\n}\nexport function getTextColor(el: HTMLElement) {\n    const backgroundColor = window.getComputedStyle(el).backgroundColor\n    if (backgroundColor === 'rgba(0, 0, 0, 0)') {\n        return 'black'\n    }\n    const colorMatch = backgroundColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/)\n    if (!colorMatch) return 'black'\n\n    const r = parseInt(colorMatch[1])\n    const g = parseInt(colorMatch[2])\n    const b = parseInt(colorMatch[3])\n    const hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b))\n    return hsp > 127.5 ? 'black' : 'white'\n}\n\nexport const defaultSurveyAppearance: SurveyAppearance = {\n    backgroundColor: '#eeeded',\n    submitButtonColor: 'black',\n    ratingButtonColor: 'white',\n    ratingButtonActiveColor: 'black',\n    borderColor: '#c9c6c6',\n    placeholder: 'Start typing...',\n    whiteLabel: false,\n    displayThankYouMessage: true,\n    thankYouMessageHeader: 'Thank you for your feedback!',\n    position: 'right',\n}\n\nexport const defaultBackgroundColor = '#eeeded'\n\nexport const createShadow = (styleSheet: string, surveyId: string) => {\n    const div = document.createElement('div')\n    div.className = `PostHogSurvey${surveyId}`\n    const shadow = div.attachShadow({ mode: 'open' })\n    if (styleSheet) {\n        const styleElement = Object.assign(document.createElement('style'), {\n            innerText: styleSheet,\n        })\n        shadow.appendChild(styleElement)\n    }\n    document.body.appendChild(div)\n    return shadow\n}\n\nexport const sendSurveyEvent = (\n    responses: Record<string, string | number | string[] | null> = {},\n    survey: Survey,\n    posthog?: PostHog\n) => {\n    if (!posthog) return\n    localStorage.setItem(`seenSurvey_${survey.id}`, 'true')\n    posthog.capture('survey sent', {\n        $survey_name: survey.name,\n        $survey_id: survey.id,\n        $survey_questions: survey.questions.map((question) => question.question),\n        sessionRecordingUrl: posthog.get_session_replay_url?.(),\n        ...responses,\n        $set: {\n            [`$survey_responded/${survey.id}`]: true,\n        },\n    })\n    window.dispatchEvent(new Event('PHSurveySent'))\n}\n\n// Use the Fisher-yates algorithm to shuffle this array\n// https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\nexport const shuffle = (array: any[]) => {\n    return array\n        .map((a) => ({ sort: Math.random(), value: a }))\n        .sort((a, b) => a.sort - b.sort)\n        .map((a) => a.value)\n}\n\nexport const getDisplayOrderChoices = (question: MultipleSurveyQuestion): string[] => {\n    if (!question.shuffleOptions) {\n        return question.choices\n    }\n\n    let displayOrderChoices = question.choices\n    let openEndedChoice = ''\n    if (question.hasOpenChoice) {\n        // if the question has an open-ended choice, its always the last element in the choices array.\n        openEndedChoice = displayOrderChoices.pop()!\n    }\n\n    displayOrderChoices = shuffle(displayOrderChoices)\n\n    if (question.hasOpenChoice) {\n        question.choices.push(openEndedChoice)\n        displayOrderChoices.push(openEndedChoice)\n    }\n\n    return displayOrderChoices\n}\n\nexport const getDisplayOrderQuestions = (survey: Survey): SurveyQuestion[] => {\n    if (!survey.appearance || !survey.appearance.shuffleQuestions) {\n        return survey.questions\n    }\n\n    return shuffle(survey.questions)\n}\n\nexport const SurveyContext = createContext<{\n    readOnly: boolean\n    previewQuestionIndex: number\n    textColor: string\n}>({\n    readOnly: false,\n    previewQuestionIndex: 0,\n    textColor: 'black',\n})\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function d(t,u){n.__h&&n.__h(r,t,o||u),o=0;var i=r.__H||(r.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:c}),i.__[t]}function h(n){return o=1,s(B,n)}function s(n,u,i){var o=d(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):B(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.u)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=!1;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),!(!i&&o.__c.props===n)&&(!c||c.call(this,n,t,r))};r.u=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function p(u,i){var o=d(t++,3);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__H.__h.push(o))}function y(u,i){var o=d(t++,4);!n.__s&&z(o.__H,i)&&(o.__=u,o.i=i,r.__h.push(o))}function _(n){return o=5,F(function(){return{current:n}},[])}function A(n,t,r){o=6,y(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==r?r:r.concat(n))}function F(n,r){var u=d(t++,7);return z(u.__H,r)?(u.__V=n(),u.i=r,u.__h=n,u.__V):u.__}function T(n,t){return o=8,F(function(){return n},t)}function q(n){var u=r.context[n.__c],i=d(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function x(t,r){n.useDebugValue&&n.useDebugValue(r?r(t):t)}function P(n){var u=d(t++,10),i=h();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function V(){var n=d(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function b(){for(var t;t=f.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(k),t.__H.__h.forEach(w),t.__H.__h=[]}catch(r){t.__H.__h=[],n.__e(r,t.__v)}}n.__b=function(n){r=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=c,n.__N=n.i=void 0})):(i.__h.forEach(k),i.__h.forEach(w),i.__h=[],t=0)),u=r},n.diffed=function(t){v&&v(t);var o=t.__c;o&&o.__H&&(o.__H.__h.length&&(1!==f.push(o)&&i===n.requestAnimationFrame||((i=n.requestAnimationFrame)||j)(b)),o.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==c&&(n.__=n.__V),n.i=void 0,n.__V=c})),u=r=null},n.__c=function(t,r){r.some(function(t){try{t.__h.forEach(k),t.__h=t.__h.filter(function(n){return!n.__||w(n)})}catch(u){r.some(function(n){n.__h&&(n.__h=[])}),r=[],n.__e(u,t.__v)}}),l&&l(t,r)},n.unmount=function(t){m&&m(t);var r,u=t.__c;u&&u.__H&&(u.__H.__.forEach(function(n){try{k(n)}catch(n){r=n}}),u.__H=void 0,r&&n.__e(r,u.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t,r=function(){clearTimeout(u),g&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,100);g&&(t=requestAnimationFrame(r))}function k(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function w(n){var t=r;n.__c=n.__(),r=t}function z(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function B(n,t){return\"function\"==typeof t?t(n):t}export{T as useCallback,q as useContext,x as useDebugValue,p as useEffect,P as useErrorBoundary,V as useId,A as useImperativeHandle,y as useLayoutEffect,F as useMemo,s as useReducer,_ as useRef,h as useState};\n//# sourceMappingURL=hooks.module.js.map\n","// eslint-disable-next-line posthog-js/no-direct-array-check\nconst nativeIsArray = Array.isArray\nconst ObjProto = Object.prototype\nexport const hasOwnProperty = ObjProto.hasOwnProperty\nconst toString = ObjProto.toString\n\nexport const isArray =\n    nativeIsArray ||\n    function (obj: any): obj is any[] {\n        return toString.call(obj) === '[object Array]'\n    }\nexport const isUint8Array = function (x: unknown): x is Uint8Array {\n    return toString.call(x) === '[object Uint8Array]'\n}\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// let bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\nexport const isFunction = function (f: any): f is (...args: any[]) => any {\n    // eslint-disable-next-line posthog-js/no-direct-function-check\n    return typeof f === 'function'\n}\n// Underscore Addons\nexport const isObject = function (x: unknown): x is Record<string, any> {\n    // eslint-disable-next-line posthog-js/no-direct-object-check\n    return x === Object(x) && !isArray(x)\n}\nexport const isEmptyObject = function (x: unknown): x is Record<string, any> {\n    if (isObject(x)) {\n        for (const key in x) {\n            if (hasOwnProperty.call(x, key)) {\n                return false\n            }\n        }\n        return true\n    }\n    return false\n}\nexport const isUndefined = function (x: unknown): x is undefined {\n    return x === void 0\n}\n\nexport const isString = function (x: unknown): x is string {\n    // eslint-disable-next-line posthog-js/no-direct-string-check\n    return toString.call(x) == '[object String]'\n}\n\nexport const isEmptyString = function (x: unknown): boolean {\n    return isString(x) && x.trim().length === 0\n}\n\nexport const isNull = function (x: unknown): x is null {\n    // eslint-disable-next-line posthog-js/no-direct-null-check\n    return x === null\n}\n\n/*\n    sometimes you want to check if something is null or undefined\n    that's what this is for\n */\nexport const isNullish = function (x: unknown): x is null | undefined {\n    return isUndefined(x) || isNull(x)\n}\n\nexport const isDate = function (x: unknown): x is Date {\n    // eslint-disable-next-line posthog-js/no-direct-date-check\n    return toString.call(x) == '[object Date]'\n}\nexport const isNumber = function (x: unknown): x is number {\n    // eslint-disable-next-line posthog-js/no-direct-number-check\n    return toString.call(x) == '[object Number]'\n}\nexport const isBoolean = function (x: unknown): x is boolean {\n    // eslint-disable-next-line posthog-js/no-direct-boolean-check\n    return toString.call(x) === '[object Boolean]'\n}\n\nexport const isDocument = (x: unknown): x is Document => {\n    // eslint-disable-next-line posthog-js/no-direct-document-check\n    return x instanceof Document\n}\n\nexport const isFormData = (x: unknown): x is FormData => {\n    // eslint-disable-next-line posthog-js/no-direct-form-data-check\n    return x instanceof FormData\n}\n\nexport const isFile = (x: unknown): x is File => {\n    // eslint-disable-next-line posthog-js/no-direct-file-check\n    return x instanceof File\n}\n","export const satisfiedEmoji = (\n    <svg className=\"emoji-svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\n        <path d=\"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z\" />\n    </svg>\n)\nexport const neutralEmoji = (\n    <svg className=\"emoji-svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\n        <path d=\"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z\" />\n    </svg>\n)\nexport const dissatisfiedEmoji = (\n    <svg className=\"emoji-svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\n        <path d=\"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z\" />\n    </svg>\n)\nexport const veryDissatisfiedEmoji = (\n    <svg className=\"emoji-svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\n        <path d=\"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z\" />\n    </svg>\n)\nexport const verySatisfiedEmoji = (\n    <svg className=\"emoji-svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" viewBox=\"0 -960 960 960\" width=\"48\">\n        <path d=\"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z\" />\n    </svg>\n)\nexport const cancelSVG = (\n    <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n            fill-rule=\"evenodd\"\n            clip-rule=\"evenodd\"\n            d=\"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z\"\n            fill=\"black\"\n        />\n    </svg>\n)\nexport const IconPosthogLogo = (\n    <svg width=\"77\" height=\"14\" viewBox=\"0 0 77 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g clip-path=\"url(#clip0_2415_6911)\">\n            <mask\n                id=\"mask0_2415_6911\"\n                style={{ maskType: 'luminance' }}\n                maskUnits=\"userSpaceOnUse\"\n                x=\"0\"\n                y=\"0\"\n                width=\"77\"\n                height=\"14\"\n            >\n                <path d=\"M0.5 0H76.5V14H0.5V0Z\" fill=\"white\" />\n            </mask>\n            <g mask=\"url(#mask0_2415_6911)\">\n                <path\n                    d=\"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z\"\n                    fill=\"#1D4AFF\"\n                />\n                <path\n                    d=\"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z\"\n                    fill=\"#F9BD2B\"\n                />\n                <path\n                    d=\"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z\"\n                    fill=\"currentColor\"\n                />\n                <path\n                    d=\"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z\"\n                    fill=\"#1D4AFF\"\n                />\n                <path\n                    d=\"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z\"\n                    fill=\"#F54E00\"\n                />\n                <path\n                    d=\"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z\"\n                    fill=\"currentColor\"\n                />\n            </g>\n        </g>\n        <defs>\n            <clipPath id=\"clip0_2415_6911\">\n                <rect width=\"76\" height=\"14\" fill=\"white\" transform=\"translate(0.5)\" />\n            </clipPath>\n        </defs>\n    </svg>\n)\nexport const checkSVG = (\n    <svg width=\"16\" height=\"12\" viewBox=\"0 0 16 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path\n            d=\"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z\"\n            fill=\"currentColor\"\n        />\n    </svg>\n)\n","import { IconPosthogLogo } from '../icons'\nimport { getContrastingTextColor } from '../surveys-utils'\n\nexport function PostHogLogo({ backgroundColor }: { backgroundColor: string }) {\n    const textColor = getContrastingTextColor(backgroundColor)\n\n    return (\n        <a\n            href=\"https://posthog.com\"\n            target=\"_blank\"\n            rel=\"noopener\"\n            style={{ backgroundColor: backgroundColor, color: textColor }}\n            className=\"footer-branding\"\n        >\n            Survey by {IconPosthogLogo}\n        </a>\n    )\n}\n","import { window } from '../../../utils/globals'\n\nimport { SurveyAppearance } from '../../../posthog-surveys-types'\n\nimport { PostHogLogo } from './PostHogLogo'\nimport { useContext } from 'preact/hooks'\nimport {\n    SurveyContext,\n    defaultBackgroundColor,\n    defaultSurveyAppearance,\n    getContrastingTextColor,\n} from '../surveys-utils'\n\nexport function BottomSection({\n    text,\n    submitDisabled,\n    appearance,\n    onSubmit,\n    link,\n}: {\n    text: string\n    submitDisabled: boolean\n    appearance: SurveyAppearance\n    onSubmit: () => void\n    link?: string | null\n}) {\n    const { readOnly } = useContext(SurveyContext)\n    const textColor = getContrastingTextColor(appearance.submitButtonColor || defaultSurveyAppearance.submitButtonColor)\n    return (\n        <div className=\"bottom-section\">\n            <div className=\"buttons\">\n                <button\n                    className=\"form-submit\"\n                    disabled={submitDisabled && !readOnly}\n                    type=\"button\"\n                    style={{ color: textColor }}\n                    onClick={() => {\n                        if (readOnly) return\n                        if (link) {\n                            window?.open(link)\n                        }\n                        onSubmit()\n                    }}\n                >\n                    {text}\n                </button>\n            </div>\n            {!appearance.whiteLabel && (\n                <PostHogLogo backgroundColor={appearance.backgroundColor || defaultBackgroundColor} />\n            )}\n        </div>\n    )\n}\n","import { SurveyContext, defaultSurveyAppearance } from '../surveys-utils'\nimport { cancelSVG } from '../icons'\nimport { useContext } from 'preact/hooks'\n\nexport function QuestionHeader({\n    question,\n    description,\n    backgroundColor,\n}: {\n    question: string\n    description?: string | null\n    backgroundColor?: string\n}) {\n    return (\n        <div style={{ backgroundColor: backgroundColor || defaultSurveyAppearance.backgroundColor }}>\n            <div className=\"survey-question\">{question}</div>\n            {description && <div className=\"description\" dangerouslySetInnerHTML={{ __html: description }} />}\n        </div>\n    )\n}\n\nexport function Cancel({ onClick }: { onClick: () => void }) {\n    const { readOnly } = useContext(SurveyContext)\n\n    return (\n        <div className=\"cancel-btn-wrapper\">\n            <button className=\"form-cancel\" onClick={onClick} disabled={readOnly}>\n                {cancelSVG}\n            </button>\n        </div>\n    )\n}\n","import { BottomSection } from './BottomSection'\nimport { Cancel } from './QuestionHeader'\nimport { SurveyAppearance } from '../../../posthog-surveys-types'\nimport { defaultSurveyAppearance, getContrastingTextColor } from '../surveys-utils'\n\nexport function ConfirmationMessage({\n    confirmationHeader,\n    confirmationDescription,\n    appearance,\n    onClose,\n    styleOverrides,\n}: {\n    confirmationHeader: string\n    confirmationDescription: string\n    appearance: SurveyAppearance\n    onClose: () => void\n    styleOverrides?: React.CSSProperties\n}) {\n    const textColor = getContrastingTextColor(appearance.backgroundColor || defaultSurveyAppearance.backgroundColor)\n\n    return (\n        <>\n            <div className=\"thank-you-message\" style={{ ...styleOverrides }}>\n                <div className=\"thank-you-message-container\">\n                    <Cancel onClick={() => onClose()} />\n                    <h3 className=\"thank-you-message-header\" style={{ color: textColor }}>\n                        {confirmationHeader}\n                    </h3>\n                    {confirmationDescription && (\n                        <div\n                            style={{ color: textColor }}\n                            className=\"thank-you-message-body\"\n                            dangerouslySetInnerHTML={{ __html: confirmationDescription }}\n                        />\n                    )}\n                    <BottomSection\n                        text={'Close'}\n                        submitDisabled={false}\n                        appearance={appearance}\n                        onSubmit={() => onClose()}\n                    />\n                </div>\n            </div>\n        </>\n    )\n}\n","import { useEffect, useRef, useState } from 'preact/hooks'\nimport { SurveyAppearance } from '../../../posthog-surveys-types'\nimport * as Preact from 'preact'\nimport { getTextColor } from '../surveys-utils'\n\nexport function useContrastingTextColor(options: {\n    appearance: SurveyAppearance\n    defaultTextColor?: string\n    forceUpdate?: boolean\n}): {\n    ref: Preact.RefObject<HTMLElement>\n    textColor: string\n} {\n    const ref = useRef<HTMLElement>(null)\n    const [textColor, setTextColor] = useState(options.defaultTextColor ?? 'black')\n\n    // TODO: useContext to get the background colors instead of querying the DOM\n    useEffect(() => {\n        if (ref.current) {\n            const color = getTextColor(ref.current)\n            setTextColor(color)\n        }\n    }, [options.appearance, options.forceUpdate])\n\n    return {\n        ref,\n        textColor,\n    }\n}\n","import {\n    BasicSurveyQuestion,\n    SurveyAppearance,\n    LinkSurveyQuestion,\n    RatingSurveyQuestion,\n    MultipleSurveyQuestion,\n    SurveyQuestionType,\n} from '../../../posthog-surveys-types'\nimport { RefObject } from 'preact'\nimport { useRef, useState, useMemo } from 'preact/hooks'\nimport { isNull, isArray } from '../../../utils/type-utils'\nimport { useContrastingTextColor } from '../hooks/useContrastingTextColor'\nimport {\n    checkSVG,\n    dissatisfiedEmoji,\n    neutralEmoji,\n    satisfiedEmoji,\n    veryDissatisfiedEmoji,\n    verySatisfiedEmoji,\n} from '../icons'\nimport { defaultSurveyAppearance, getDisplayOrderChoices } from '../surveys-utils'\nimport { BottomSection } from './BottomSection'\nimport { Cancel, QuestionHeader } from './QuestionHeader'\n\nexport function OpenTextQuestion({\n    question,\n    appearance,\n    onSubmit,\n    closeSurveyPopup,\n}: {\n    question: BasicSurveyQuestion\n    appearance: SurveyAppearance\n    onSubmit: (text: string) => void\n    closeSurveyPopup: () => void\n}) {\n    const textRef = useRef(null)\n    const [text, setText] = useState('')\n\n    return (\n        <div\n            className=\"survey-box\"\n            style={{ backgroundColor: appearance.backgroundColor || defaultSurveyAppearance.backgroundColor }}\n            ref={textRef}\n        >\n            <Cancel onClick={() => closeSurveyPopup()} />\n            <QuestionHeader\n                question={question.question}\n                description={question.description}\n                backgroundColor={appearance.backgroundColor}\n            />\n            <textarea rows={4} placeholder={appearance?.placeholder} onInput={(e) => setText(e.currentTarget.value)} />\n            <BottomSection\n                text={question.buttonText || 'Submit'}\n                submitDisabled={!text && !question.optional}\n                appearance={appearance}\n                onSubmit={() => onSubmit(text)}\n            />\n        </div>\n    )\n}\n\nexport function LinkQuestion({\n    question,\n    appearance,\n    onSubmit,\n    closeSurveyPopup,\n}: {\n    question: LinkSurveyQuestion\n    appearance: SurveyAppearance\n    onSubmit: (clicked: string) => void\n    closeSurveyPopup: () => void\n}) {\n    return (\n        <div className=\"survey-box\">\n            <Cancel onClick={() => closeSurveyPopup()} />\n            <QuestionHeader question={question.question} description={question.description} />\n            <BottomSection\n                text={question.buttonText || 'Submit'}\n                submitDisabled={false}\n                link={question.link}\n                appearance={appearance}\n                onSubmit={() => onSubmit('link clicked')}\n            />\n        </div>\n    )\n}\n\nexport function RatingQuestion({\n    question,\n    questionIndex,\n    appearance,\n    onSubmit,\n    closeSurveyPopup,\n}: {\n    question: RatingSurveyQuestion\n    questionIndex: number\n    appearance: SurveyAppearance\n    onSubmit: (rating: number | null) => void\n    closeSurveyPopup: () => void\n}) {\n    const scale = question.scale\n    const starting = question.scale === 10 ? 0 : 1\n    const [rating, setRating] = useState<number | null>(null)\n\n    return (\n        <div className=\"survey-box\">\n            <Cancel onClick={() => closeSurveyPopup()} />\n            <QuestionHeader\n                question={question.question}\n                description={question.description}\n                backgroundColor={appearance.backgroundColor}\n            />\n            <div className=\"rating-section\">\n                <div className=\"rating-options\">\n                    {question.display === 'emoji' && (\n                        <div className=\"rating-options-emoji\">\n                            {(question.scale === 3 ? threeScaleEmojis : fiveScaleEmojis).map((emoji, idx) => {\n                                const active = idx + 1 === rating\n                                return (\n                                    <button\n                                        className={`ratings-emoji question-${questionIndex}-rating-${idx} ${\n                                            active ? 'rating-active' : null\n                                        }`}\n                                        value={idx + 1}\n                                        key={idx}\n                                        type=\"button\"\n                                        onClick={() => {\n                                            setRating(idx + 1)\n                                        }}\n                                    >\n                                        {emoji}\n                                    </button>\n                                )\n                            })}\n                        </div>\n                    )}\n                    {question.display === 'number' && (\n                        <div\n                            className=\"rating-options-number\"\n                            style={{ gridTemplateColumns: `repeat(${scale - starting + 1}, minmax(0, 1fr))` }}\n                        >\n                            {(question.scale === 5 ? fiveScaleNumbers : tenScaleNumbers).map((number, idx) => {\n                                const active = rating === number\n                                return (\n                                    <RatingButton\n                                        key={idx}\n                                        questionIndex={questionIndex}\n                                        active={active}\n                                        appearance={appearance}\n                                        num={number}\n                                        setActiveNumber={(num) => {\n                                            setRating(num)\n                                        }}\n                                    />\n                                )\n                            })}\n                        </div>\n                    )}\n                </div>\n                <div className=\"rating-text\">\n                    <div>{question.lowerBoundLabel}</div>\n                    <div>{question.upperBoundLabel}</div>\n                </div>\n            </div>\n            <BottomSection\n                text={question.buttonText || appearance?.submitButtonText || 'Submit'}\n                submitDisabled={isNull(rating) && !question.optional}\n                appearance={appearance}\n                onSubmit={() => onSubmit(rating)}\n            />\n        </div>\n    )\n}\n\nexport function RatingButton({\n    num,\n    active,\n    questionIndex,\n    appearance,\n    setActiveNumber,\n}: {\n    num: number\n    active: boolean\n    questionIndex: number\n    appearance: any\n    setActiveNumber: (num: number) => void\n}) {\n    const { textColor, ref } = useContrastingTextColor({ appearance, defaultTextColor: 'black', forceUpdate: active })\n    return (\n        <button\n            ref={ref as RefObject<HTMLButtonElement>}\n            className={`ratings-number question-${questionIndex}-rating-${num} ${active ? 'rating-active' : null}`}\n            type=\"button\"\n            onClick={() => {\n                setActiveNumber(num)\n            }}\n            style={{\n                color: textColor,\n                backgroundColor: active ? appearance.ratingButtonActiveColor : appearance.ratingButtonColor,\n                borderColor: appearance.borderColor,\n            }}\n        >\n            {num}\n        </button>\n    )\n}\n\nexport function MultipleChoiceQuestion({\n    question,\n    questionIndex,\n    appearance,\n    onSubmit,\n    closeSurveyPopup,\n}: {\n    question: MultipleSurveyQuestion\n    questionIndex: number\n    appearance: SurveyAppearance\n    onSubmit: (choices: string | string[] | null) => void\n    closeSurveyPopup: () => void\n}) {\n    const textRef = useRef(null)\n    const choices = useMemo(() => getDisplayOrderChoices(question), [question])\n    const [selectedChoices, setSelectedChoices] = useState<string | string[] | null>(\n        question.type === SurveyQuestionType.MultipleChoice ? [] : null\n    )\n    const [openChoiceSelected, setOpenChoiceSelected] = useState(false)\n    const [openEndedInput, setOpenEndedInput] = useState('')\n\n    const inputType = question.type === SurveyQuestionType.SingleChoice ? 'radio' : 'checkbox'\n    return (\n        <div\n            className=\"survey-box\"\n            style={{ backgroundColor: appearance.backgroundColor || defaultSurveyAppearance.backgroundColor }}\n            ref={textRef}\n        >\n            <Cancel onClick={() => closeSurveyPopup()} />\n            <QuestionHeader\n                question={question.question}\n                description={question.description}\n                backgroundColor={appearance.backgroundColor}\n            />\n            <div className=\"multiple-choice-options\">\n                {/* Remove the last element from the choices, if hasOpenChoice is set */}\n                {/* shuffle all other options here if question.shuffleOptions is set */}\n                {/* Always ensure that the open ended choice is the last option */}\n                {choices.map((choice: string, idx: number) => {\n                    let choiceClass = 'choice-option'\n                    const val = choice\n                    const option = choice\n                    if (!!question.hasOpenChoice && idx === question.choices.length - 1) {\n                        choiceClass += ' choice-option-open'\n                    }\n                    return (\n                        <div className={choiceClass}>\n                            <input\n                                type={inputType}\n                                id={`surveyQuestion${questionIndex}Choice${idx}`}\n                                name={`question${questionIndex}`}\n                                value={val}\n                                disabled={!val}\n                                onInput={() => {\n                                    if (question.hasOpenChoice && idx === question.choices.length - 1) {\n                                        return setOpenChoiceSelected(!openChoiceSelected)\n                                    }\n                                    if (question.type === SurveyQuestionType.SingleChoice) {\n                                        return setSelectedChoices(val)\n                                    }\n                                    if (\n                                        question.type === SurveyQuestionType.MultipleChoice &&\n                                        isArray(selectedChoices)\n                                    ) {\n                                        if (selectedChoices.includes(val)) {\n                                            // filter out values because clicking on a selected choice should deselect it\n                                            return setSelectedChoices(\n                                                selectedChoices.filter((choice) => choice !== val)\n                                            )\n                                        }\n                                        return setSelectedChoices([...selectedChoices, val])\n                                    }\n                                }}\n                            />\n                            <label htmlFor={`surveyQuestion${questionIndex}Choice${idx}`} style={{ color: 'black' }}>\n                                {question.hasOpenChoice && idx === question.choices.length - 1 ? (\n                                    <>\n                                        <span>{option}:</span>\n                                        <input\n                                            type=\"text\"\n                                            id={`surveyQuestion${questionIndex}Choice${idx}Open`}\n                                            name={`question${questionIndex}`}\n                                            onInput={(e) => {\n                                                const userValue = e.currentTarget.value\n                                                if (question.type === SurveyQuestionType.SingleChoice) {\n                                                    return setSelectedChoices(userValue)\n                                                }\n                                                if (\n                                                    question.type === SurveyQuestionType.MultipleChoice &&\n                                                    isArray(selectedChoices)\n                                                ) {\n                                                    return setOpenEndedInput(userValue)\n                                                }\n                                            }}\n                                        />\n                                    </>\n                                ) : (\n                                    option\n                                )}\n                            </label>\n                            <span className=\"choice-check\" style={{ color: 'black' }}>\n                                {checkSVG}\n                            </span>\n                        </div>\n                    )\n                })}\n            </div>\n            <BottomSection\n                text={question.buttonText || 'Submit'}\n                submitDisabled={\n                    (isNull(selectedChoices) ||\n                        (isArray(selectedChoices) && !openChoiceSelected && selectedChoices.length === 0) ||\n                        (isArray(selectedChoices) &&\n                            openChoiceSelected &&\n                            !openEndedInput &&\n                            selectedChoices.length === 0 &&\n                            !question.optional)) &&\n                    !question.optional\n                }\n                appearance={appearance}\n                onSubmit={() => {\n                    if (openChoiceSelected && question.type === SurveyQuestionType.MultipleChoice) {\n                        if (isArray(selectedChoices)) {\n                            onSubmit([...selectedChoices, openEndedInput])\n                        }\n                    } else {\n                        onSubmit(selectedChoices)\n                    }\n                }}\n            />\n        </div>\n    )\n}\n\nconst threeScaleEmojis = [dissatisfiedEmoji, neutralEmoji, satisfiedEmoji]\nconst fiveScaleEmojis = [veryDissatisfiedEmoji, dissatisfiedEmoji, neutralEmoji, satisfiedEmoji, verySatisfiedEmoji]\nconst fiveScaleNumbers = [1, 2, 3, 4, 5]\nconst tenScaleNumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n","import { PostHog } from '../posthog-core'\nimport {\n    BasicSurveyQuestion,\n    LinkSurveyQuestion,\n    MultipleSurveyQuestion,\n    RatingSurveyQuestion,\n    Survey,\n    SurveyAppearance,\n    SurveyQuestion,\n    SurveyQuestionType,\n    SurveyType,\n} from '../posthog-surveys-types'\n\nimport { window as _window, document as _document } from '../utils/globals'\nimport {\n    style,\n    defaultSurveyAppearance,\n    sendSurveyEvent,\n    createShadow,\n    getContrastingTextColor,\n    SurveyContext,\n    getDisplayOrderQuestions,\n} from './surveys/surveys-utils'\nimport * as Preact from 'preact'\nimport { createWidgetShadow, createWidgetStyle } from './surveys-widget'\nimport { useState, useEffect, useRef, useContext, useMemo } from 'preact/hooks'\nimport { isNumber } from '../utils/type-utils'\nimport { ConfirmationMessage } from './surveys/components/ConfirmationMessage'\nimport {\n    OpenTextQuestion,\n    LinkQuestion,\n    RatingQuestion,\n    MultipleChoiceQuestion,\n} from './surveys/components/QuestionTypes'\n\n// We cast the types here which is dangerous but protected by the top level generateSurveys call\nconst window = _window as Window & typeof globalThis\nconst document = _document as Document\n\nconst handleWidget = (posthog: PostHog, survey: Survey) => {\n    const shadow = createWidgetShadow(survey)\n    const surveyStyleSheet = style(survey.appearance)\n    shadow.appendChild(Object.assign(document.createElement('style'), { innerText: surveyStyleSheet }))\n    Preact.render(<FeedbackWidget key={'feedback-survey'} posthog={posthog} survey={survey} />, shadow)\n}\n\nexport const callSurveys = (posthog: PostHog, forceReload: boolean = false) => {\n    posthog?.getActiveMatchingSurveys((surveys) => {\n        const nonAPISurveys = surveys.filter((survey) => survey.type !== 'api')\n        nonAPISurveys.forEach((survey) => {\n            if (survey.type === SurveyType.Widget) {\n                if (\n                    survey.appearance?.widgetType === 'tab' &&\n                    document.querySelectorAll(`.PostHogWidget${survey.id}`).length === 0\n                ) {\n                    handleWidget(posthog, survey)\n                }\n                if (survey.appearance?.widgetType === 'selector' && survey.appearance?.widgetSelector) {\n                    const selectorOnPage = document.querySelector(survey.appearance.widgetSelector)\n                    if (selectorOnPage) {\n                        if (document.querySelectorAll(`.PostHogWidget${survey.id}`).length === 0) {\n                            handleWidget(posthog, survey)\n                        } else if (document.querySelectorAll(`.PostHogWidget${survey.id}`).length === 1) {\n                            // we have to check if user selector already has a survey listener attached to it because we always have to check if it's on the page or not\n                            if (!selectorOnPage.getAttribute('PHWidgetSurveyClickListener')) {\n                                const surveyPopup = document\n                                    .querySelector(`.PostHogWidget${survey.id}`)\n                                    ?.shadowRoot?.querySelector(`.survey-form`) as HTMLFormElement\n                                selectorOnPage.addEventListener('click', () => {\n                                    if (surveyPopup) {\n                                        surveyPopup.style.display =\n                                            surveyPopup.style.display === 'none' ? 'block' : 'none'\n                                        surveyPopup.addEventListener(\n                                            'PHSurveyClosed',\n                                            () => (surveyPopup.style.display = 'none')\n                                        )\n                                    }\n                                })\n                                selectorOnPage.setAttribute('PHWidgetSurveyClickListener', 'true')\n                            }\n                        }\n                    }\n                }\n            }\n            if (\n                survey.type === SurveyType.Popover &&\n                document.querySelectorAll(\"div[class^='PostHogSurvey']\").length === 0\n            ) {\n                const surveyWaitPeriodInDays = survey.conditions?.seenSurveyWaitPeriodInDays\n                const lastSeenSurveyDate = localStorage.getItem(`lastSeenSurveyDate`)\n                if (surveyWaitPeriodInDays && lastSeenSurveyDate) {\n                    const today = new Date()\n                    const diff = Math.abs(today.getTime() - new Date(lastSeenSurveyDate).getTime())\n                    const diffDaysFromToday = Math.ceil(diff / (1000 * 3600 * 24))\n                    if (diffDaysFromToday < surveyWaitPeriodInDays) {\n                        return\n                    }\n                }\n\n                if (!localStorage.getItem(`seenSurvey_${survey.id}`)) {\n                    const shadow = createShadow(style(survey?.appearance), survey.id)\n                    Preact.render(<Surveys key={'popover-survey'} posthog={posthog} survey={survey} />, shadow)\n                }\n            }\n        })\n    }, forceReload)\n}\n\nexport const renderSurveysPreview = (\n    survey: Survey,\n    root: HTMLElement,\n    displayState: 'survey' | 'confirmation',\n    previewQuestionIndex: number\n) => {\n    const surveyStyleSheet = style(survey.appearance)\n    const styleElement = Object.assign(document.createElement('style'), { innerText: surveyStyleSheet })\n    root.appendChild(styleElement)\n    const textColor = getContrastingTextColor(\n        survey.appearance?.backgroundColor || defaultSurveyAppearance.backgroundColor || 'white'\n    )\n\n    Preact.render(\n        <Surveys\n            key={'surveys-render-preview'}\n            survey={survey}\n            readOnly={true}\n            initialDisplayState={displayState}\n            previewQuestionIndex={previewQuestionIndex}\n            style={{\n                position: 'relative',\n                right: 0,\n                borderBottom: `1px solid ${survey.appearance?.borderColor}`,\n                borderRadius: 10,\n                color: textColor,\n            }}\n        />,\n        root\n    )\n}\n\nexport const renderFeedbackWidgetPreview = (survey: Survey, root: HTMLElement) => {\n    const widgetStyleSheet = createWidgetStyle(survey.appearance?.widgetColor)\n    const styleElement = Object.assign(document.createElement('style'), { innerText: widgetStyleSheet })\n    root.appendChild(styleElement)\n    Preact.render(<FeedbackWidget key={'feedback-render-preview'} survey={survey} readOnly={true} />, root)\n}\n\n// This is the main exported function\nexport function generateSurveys(posthog: PostHog) {\n    // NOTE: Important to ensure we never try and run surveys without a window environment\n    if (!document || !window) {\n        return\n    }\n    callSurveys(posthog, true)\n\n    // recalculate surveys every 3 seconds to check if URL or selectors have changed\n    setInterval(() => {\n        callSurveys(posthog, false)\n    }, 3000)\n}\n\nexport function Surveys({\n    survey,\n    posthog,\n    readOnly,\n    style,\n    initialDisplayState,\n    previewQuestionIndex,\n}: {\n    survey: Survey\n    posthog?: PostHog\n    readOnly?: boolean\n    style?: React.CSSProperties\n    initialDisplayState?: 'survey' | 'confirmation' | 'closed'\n    previewQuestionIndex?: number\n}) {\n    const [displayState, setDisplayState] = useState<'survey' | 'confirmation' | 'closed'>(\n        initialDisplayState || 'survey'\n    )\n\n    useEffect(() => {\n        if (readOnly || !posthog) {\n            return\n        }\n\n        window.dispatchEvent(new Event('PHSurveyShown'))\n\n        posthog.capture('survey shown', {\n            $survey_name: survey.name,\n            $survey_id: survey.id,\n            sessionRecordingUrl: posthog.get_session_replay_url?.(),\n        })\n        localStorage.setItem(`lastSeenSurveyDate`, new Date().toISOString())\n\n        window.addEventListener('PHSurveyClosed', () => {\n            setDisplayState('closed')\n        })\n\n        window.addEventListener('PHSurveySent', () => {\n            if (!survey.appearance?.displayThankYouMessage) {\n                return setDisplayState('closed')\n            }\n            setDisplayState('confirmation')\n            if (survey.appearance?.autoDisappear) {\n                setTimeout(() => {\n                    setDisplayState('closed')\n                }, 5000)\n            }\n        })\n    }, [])\n    const confirmationBoxLeftStyle = style?.left && isNumber(style?.left) ? { left: style.left - 40 } : {}\n\n    return (\n        <>\n            <SurveyContext.Provider\n                value={{\n                    readOnly: !!readOnly,\n                    previewQuestionIndex: previewQuestionIndex ?? 0,\n                    textColor: getContrastingTextColor(\n                        survey.appearance?.backgroundColor || defaultSurveyAppearance.backgroundColor\n                    ),\n                }}\n            >\n                {displayState === 'survey' && <Questions survey={survey} posthog={posthog} styleOverrides={style} />}\n                {displayState === 'confirmation' && (\n                    <ConfirmationMessage\n                        confirmationHeader={survey.appearance?.thankYouMessageHeader || 'Thank you!'}\n                        confirmationDescription={survey.appearance?.thankYouMessageDescription || ''}\n                        appearance={survey.appearance || defaultSurveyAppearance}\n                        styleOverrides={{ ...style, ...confirmationBoxLeftStyle }}\n                        onClose={() => setDisplayState('closed')}\n                    />\n                )}\n            </SurveyContext.Provider>\n        </>\n    )\n}\n\nconst questionTypeMap = (\n    question: SurveyQuestion,\n    questionIndex: number,\n    appearance: SurveyAppearance,\n    onSubmit: (res: string | string[] | number | null) => void,\n    closeSurveyPopup: () => void\n): JSX.Element => {\n    const mapping = {\n        [SurveyQuestionType.Open]: (\n            <OpenTextQuestion\n                question={question as BasicSurveyQuestion}\n                appearance={appearance}\n                onSubmit={onSubmit}\n                closeSurveyPopup={closeSurveyPopup}\n            />\n        ),\n        [SurveyQuestionType.Link]: (\n            <LinkQuestion\n                question={question as LinkSurveyQuestion}\n                appearance={appearance}\n                onSubmit={onSubmit}\n                closeSurveyPopup={closeSurveyPopup}\n            />\n        ),\n        [SurveyQuestionType.Rating]: (\n            <RatingQuestion\n                question={question as RatingSurveyQuestion}\n                appearance={appearance}\n                questionIndex={questionIndex}\n                onSubmit={onSubmit}\n                closeSurveyPopup={closeSurveyPopup}\n            />\n        ),\n        [SurveyQuestionType.SingleChoice]: (\n            <MultipleChoiceQuestion\n                question={question as MultipleSurveyQuestion}\n                appearance={appearance}\n                questionIndex={questionIndex}\n                onSubmit={onSubmit}\n                closeSurveyPopup={closeSurveyPopup}\n            />\n        ),\n        [SurveyQuestionType.MultipleChoice]: (\n            <MultipleChoiceQuestion\n                question={question as MultipleSurveyQuestion}\n                appearance={appearance}\n                questionIndex={questionIndex}\n                onSubmit={onSubmit}\n                closeSurveyPopup={closeSurveyPopup}\n            />\n        ),\n    }\n    return mapping[question.type]\n}\n\nexport function Questions({\n    survey,\n    posthog,\n    styleOverrides,\n}: {\n    survey: Survey\n    posthog?: PostHog\n    styleOverrides?: React.CSSProperties\n}) {\n    const textColor = getContrastingTextColor(\n        survey.appearance?.backgroundColor || defaultSurveyAppearance.backgroundColor\n    )\n    const [questionsResponses, setQuestionsResponses] = useState({})\n    const { readOnly, previewQuestionIndex } = useContext(SurveyContext)\n    const [currentQuestion, setCurrentQuestion] = useState(readOnly ? previewQuestionIndex : 0)\n    const surveyQuestions = useMemo(() => getDisplayOrderQuestions(survey), [survey])\n\n    const onNextClick = (res: string | string[] | number | null, idx: number) => {\n        const responseKey = idx === 0 ? `$survey_response` : `$survey_response_${idx}`\n        if (idx === survey.questions.length - 1) {\n            return sendSurveyEvent({ ...questionsResponses, [responseKey]: res }, survey, posthog)\n        } else {\n            setQuestionsResponses({ ...questionsResponses, [responseKey]: res })\n            setCurrentQuestion(idx + 1)\n        }\n    }\n\n    const questionToDisplay = readOnly ? previewQuestionIndex : currentQuestion\n    const hasMultipleQuestions = survey.questions.length > 1\n    const isPreviewThankYouMessage = readOnly && questionToDisplay === survey.questions.length\n\n    return (\n        <form\n            // TODO: BEMify classes\n            className=\"survey-form\"\n            style={{\n                color: textColor,\n                borderColor: survey.appearance?.borderColor,\n                ...styleOverrides,\n                ...(isPreviewThankYouMessage ? { border: 'none', borderBottom: 'solid 1px rgb(201, 198, 198)' } : {}),\n            }}\n        >\n            {isPreviewThankYouMessage ? (\n                <ConfirmationMessage\n                    confirmationHeader={survey.appearance?.thankYouMessageHeader || 'Thank you!'}\n                    confirmationDescription={survey.appearance?.thankYouMessageDescription || ''}\n                    appearance={survey.appearance || defaultSurveyAppearance}\n                    styleOverrides={{\n                        ...style,\n                        position: 'relative',\n                        right: '0px',\n                        borderRadius: '10px',\n                        border: 'solid 1px rgb(201, 198, 198)',\n                    }}\n                    onClose={() => {}}\n                />\n            ) : (\n                <>\n                    {surveyQuestions.map((question, idx) => {\n                        if (hasMultipleQuestions) {\n                            return (\n                                <>\n                                    {questionToDisplay === idx && (\n                                        <div className={`tab question-${idx} ${question.type}`}>\n                                            {questionTypeMap(\n                                                question,\n                                                idx,\n                                                survey.appearance || defaultSurveyAppearance,\n                                                (res) => onNextClick(res, idx),\n                                                () => closeSurveyPopup(survey, posthog, readOnly)\n                                            )}\n                                        </div>\n                                    )}\n                                </>\n                            )\n                        }\n                        return questionTypeMap(\n                            surveyQuestions[idx],\n                            idx,\n                            survey.appearance || defaultSurveyAppearance,\n                            (res) => onNextClick(res, idx),\n                            () => closeSurveyPopup(survey, posthog, readOnly)\n                        )\n                    })}\n                </>\n            )}\n        </form>\n    )\n}\n\nconst closeSurveyPopup = (survey: Survey, posthog?: PostHog, readOnly?: boolean) => {\n    // TODO: state management and unit tests for this would be nice\n    if (readOnly || !posthog) {\n        return\n    }\n    posthog.capture('survey dismissed', {\n        $survey_name: survey.name,\n        $survey_id: survey.id,\n        sessionRecordingUrl: posthog.get_session_replay_url?.(),\n        $set: {\n            [`$survey_dismissed/${survey.id}`]: true,\n        },\n    })\n    localStorage.setItem(`seenSurvey_${survey.id}`, 'true')\n    window.dispatchEvent(new Event('PHSurveyClosed'))\n}\n\nexport function FeedbackWidget({\n    survey,\n    posthog,\n    readOnly,\n}: {\n    survey: Survey\n    posthog?: PostHog\n    readOnly?: boolean\n}): JSX.Element {\n    const [showSurvey, setShowSurvey] = useState(false)\n    const [styleOverrides, setStyle] = useState({})\n    const widgetRef = useRef<HTMLDivElement>(null)\n\n    useEffect(() => {\n        if (readOnly || !posthog) {\n            return\n        }\n\n        if (survey.appearance?.widgetType === 'tab') {\n            if (widgetRef.current) {\n                const widgetPos = widgetRef.current.getBoundingClientRect()\n                const style = {\n                    top: '50%',\n                    left: parseInt(`${widgetPos.right - 360}`),\n                    bottom: 'auto',\n                    borderRadius: 10,\n                    borderBottom: `1.5px solid ${survey.appearance?.borderColor || '#c9c6c6'}`,\n                }\n                setStyle(style)\n            }\n        }\n        if (survey.appearance?.widgetType === 'selector') {\n            const widget = document.querySelector(survey.appearance.widgetSelector || '')\n            widget?.addEventListener('click', () => {\n                setShowSurvey(!showSurvey)\n            })\n            widget?.setAttribute('PHWidgetSurveyClickListener', 'true')\n        }\n    }, [])\n\n    return (\n        <>\n            {survey.appearance?.widgetType === 'tab' && (\n                <div\n                    className=\"ph-survey-widget-tab\"\n                    ref={widgetRef}\n                    onClick={() => !readOnly && setShowSurvey(!showSurvey)}\n                    style={{ color: getContrastingTextColor(survey.appearance.widgetColor) }}\n                >\n                    <div className=\"ph-survey-widget-tab-icon\"></div>\n                    {survey.appearance?.widgetLabel || ''}\n                </div>\n            )}\n            {showSurvey && (\n                <Surveys key={'feedback-widget-survey'} posthog={posthog} survey={survey} style={styleOverrides} />\n            )}\n        </>\n    )\n}\n","import { Survey } from '../posthog-surveys-types'\nimport { document as _document } from '../utils/globals'\n\n// We cast the types here which is dangerous but protected by the top level generateSurveys call\nconst document = _document as Document\n\nexport function createWidgetShadow(survey: Survey) {\n    const div = document.createElement('div')\n    div.className = `PostHogWidget${survey.id}`\n    const shadow = div.attachShadow({ mode: 'open' })\n    const widgetStyleSheet = createWidgetStyle(survey.appearance?.widgetColor)\n    shadow.append(Object.assign(document.createElement('style'), { innerText: widgetStyleSheet }))\n    document.body.appendChild(div)\n    return shadow\n}\n\nexport function createWidgetStyle(widgetColor?: string) {\n    return `\n        .ph-survey-widget-tab {\n            position: fixed;\n            top: 50%;\n            right: 0;\n            background: ${widgetColor || '#e0a045'};\n            color: white;\n            transform: rotate(-90deg) translate(0, -100%);\n            transform-origin: right top;\n            min-width: 40px;\n            padding: 8px 12px;\n            font-weight: 500;\n            border-radius: 3px 3px 0 0;\n            text-align: center;\n            cursor: pointer;\n            z-index: 9999999;\n        }\n        .ph-survey-widget-tab:hover {\n            padding-bottom: 13px;\n        }\n        .ph-survey-widget-button {\n            position: fixed;\n        }\n    `\n}\n"],"names":["SurveyType","SurveyQuestionType","win","window","undefined","global","globalThis","navigator","document","location","fetch","XMLHttpRequest","AbortController","userAgent","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","__u","_window","style","appearance","positions","left","right","center","concat","parseInt","maxWidth","zIndex","borderColor","position","backgroundColor","submitButtonColor","ratingButtonColor","ratingButtonActiveColor","hex2rgb","c","hexColor","replace","slice","getContrastingTextColor","rgb","color","arguments","length","defaultBackgroundColor","startsWith","nameColorToHex","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","toLowerCase","colorMatch","match","r","g","b","Math","sqrt","defaultSurveyAppearance","placeholder","whiteLabel","displayThankYouMessage","thankYouMessageHeader","sendSurveyEvent","_posthog$get_session_","responses","survey","posthog","localStorage","setItem","id","capture","_objectSpread","$survey_name","name","$survey_id","$survey_questions","questions","map","question","sessionRecordingUrl","get_session_replay_url","call","$set","_defineProperty","dispatchEvent","Event","shuffle","array","a","sort","random","value","getDisplayOrderQuestions","shuffleQuestions","SurveyContext","createContext","readOnly","previewQuestionIndex","textColor","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","EMPTY","oldBeforeDiff","options","__b","oldBeforeRender","__r","oldAfterDiff","diffed","oldCommit","__c","oldBeforeUnmount","unmount","getHookState","index","type","__h","hooks","__H","__","push","__V","useState","initialState","useReducer","reducer","init","hookState","_reducer","invokeOrReturn","n","currentValue","__N","nextValue","action","setState","_hasScuFromHooks","updateHookState","f","p","s","stateHooks","filter","x","every","prevScu","this","shouldUpdate","forEach","hookItem","props","shouldComponentUpdate","prevCWU","componentWillUpdate","__e","tmp","useEffect","callback","args","state","__s","argsChanged","_pendingArgs","useRef","initialValue","useMemo","current","factory","useContext","context","provider","sub","flushAfterPaintEffects","component","shift","__P","invokeCleanup","invokeEffect","e","__v","vnode","t","requestAnimationFrame","afterNextFrame","commitQueue","some","cb","hasErrored","HAS_RAF","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","hook","comp","cleanup","oldArgs","newArgs","arg","nativeIsArray","Array","isArray","toString","Object","prototype","obj","isNull","isNumber","satisfiedEmoji","_jsx","className","xmlns","height","viewBox","width","children","d","neutralEmoji","dissatisfiedEmoji","veryDissatisfiedEmoji","verySatisfiedEmoji","cancelSVG","fill","IconPosthogLogo","_jsxs","maskType","maskUnits","y","mask","transform","checkSVG","PostHogLogo","_ref","href","target","rel","BottomSection","text","submitDisabled","onSubmit","link","disabled","onClick","open","QuestionHeader","description","dangerouslySetInnerHTML","__html","Cancel","_ref2","ConfirmationMessage","confirmationHeader","confirmationDescription","onClose","styleOverrides","_Fragment","useContrastingTextColor","_options$defaultTextC","ref","_useState2","_slicedToArray","defaultTextColor","setTextColor","el","getComputedStyle","getTextColor","forceUpdate","OpenTextQuestion","closeSurveyPopup","textRef","setText","rows","onInput","currentTarget","buttonText","optional","LinkQuestion","RatingQuestion","_ref3","questionIndex","scale","starting","_useState4","rating","setRating","display","threeScaleEmojis","fiveScaleEmojis","emoji","idx","active","gridTemplateColumns","fiveScaleNumbers","tenScaleNumbers","number","RatingButton","num","setActiveNumber","lowerBoundLabel","upperBoundLabel","submitButtonText","_ref4","_useContrastingTextCo","MultipleChoiceQuestion","_ref5","choices","shuffleOptions","displayOrderChoices","openEndedChoice","hasOpenChoice","pop","getDisplayOrderChoices","_useState6","MultipleChoice","selectedChoices","setSelectedChoices","_useState8","openChoiceSelected","setOpenChoiceSelected","_useState10","openEndedInput","setOpenEndedInput","inputType","SingleChoice","choice","choiceClass","val","option","includes","_toConsumableArray","htmlFor","userValue","_document","renderSurveysPreview","root","displayState","_survey$appearance4","_survey$appearance5","surveyStyleSheet","styleElement","assign","createElement","innerText","appendChild","Preact","Surveys","initialDisplayState","borderBottom","borderRadius","renderFeedbackWidgetPreview","_survey$appearance6","widgetColor","widgetStyleSheet","FeedbackWidget","_survey$appearance9","_survey$appearance10","_survey$appearance11","setDisplayState","Date","toISOString","addEventListener","_survey$appearance7","_survey$appearance8","autoDisappear","confirmationBoxLeftStyle","Provider","Questions","thankYouMessageDescription","questionTypeMap","_mapping","Open","Link","Rating","_survey$appearance12","_survey$appearance13","_survey$appearance14","_survey$appearance15","questionsResponses","setQuestionsResponses","_useContext","currentQuestion","setCurrentQuestion","surveyQuestions","onNextClick","res","responseKey","questionToDisplay","hasMultipleQuestions","isPreviewThankYouMessage","border","_posthog$get_session_2","_survey$appearance19","_survey$appearance20","showSurvey","setShowSurvey","setStyle","widgetRef","_survey$appearance16","_survey$appearance18","widgetType","_survey$appearance17","widgetPos","getBoundingClientRect","top","bottom","widget","querySelector","widgetSelector","setAttribute","widgetLabel"],"mappings":"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","x_google_ignoreList":[2,4]}