extends layout.pug
    
block content  
    ////////////  
    // STYLE //
    style.
        img {
            width: 200px;
            height: 200px;
            margin-bottom: 20px;
        }

    //////////////
    // CONTENT //

    a(onclick='goBack()', class = 'back-button button') < Back to dashboard
    
    if playlist.images && playlist.images.length > 0
        img(src=playlist.images[0].url, class='playlist_image')
    else
        img(src="https://www.solidbackgrounds.com/images/1920x1080/1920x1080-gray-solid-color-background.jpg", class='playlist_image')
    
    h1 Here is #{playlist.name}, (re)wrapped!
    
    a(href=`/createplaylist?playlistname=${playlist.name}`, class="create-playlist-button button") Add  playlist to Spotify library

    p.smaller-text This will create a brand new playlist with only these rewrapped songs. It won't modify the original playlist!

    br
    
    h2 Your lesser listened-to tracks from this playlist.
    
    div
        if tracks && tracks.length > 0
            table 
                each t in tracks
                    tr 
                        - var artist_name = t.artists[0].name
                        - var track_name = t.name
                        - var track_preview = t.preview_url
                        - var album_cover_url = t.album_cover_url

                        td: img(src=album_cover_url, style="width:50px;height:50px;")
                        
                        td #{track_name} - #{artist_name}

                        td: audio(controls preload="auto")
                            source(src=track_preview, type="audio/mp3")
        else 
            p.empty-library  Itâ€™s unusually quiet in here... Looks like there are no tracks yet! It's the perfect moment to start adding some. 


    //////////////
    // SCRIPTS //
    script.
        function goBack() {
            window.history.back();
        }

       